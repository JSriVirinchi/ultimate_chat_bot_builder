<div class="row">
	<div class="col-1 text-center mt-2 ml-2">
		<%= image_tag('redflash.JPG', size: "14", class: "rounded-circle")%>
	</div>
	<div class="col-6 mt-2", style="padding-right: 5px;">
		Error Response
	</div>
	<%if Node.where(bot_id: @bot.id, parent_id: @node.id, node_type: "error").first%>
		<% @error_node = Node.where(bot_id: @bot.id, parent_id: @node.id, node_type: "error").first %>
		
		<div class="error_node_expanded_white">
			<% number = 0%>
			<!-- looping all error cards and its forms -->
			<% for message in Message.where(node_type: "error", node_id: @error_node.id)%>
				<% number = number + 1%>
				<!-- error number -->
				<div class="mb-2 row">
					<div class="col-8">
						<%if (number)%10 == 1 && number != 11%>
							<%= number%>st			 
						<%elsif (number)%10 == 2  && number != 12%>
							<%= number%>nd			 
						<%elsif (number)%10 == 3  && number != 13%>
							<%= number%>rd
						<%else%>	
							<%= number%>th		
						<%end%>
						error attempt 
					</div>
					<div class="col-4">
						<%= link_to image_tag('editiconblack.png', size: "14", class: " mr-2"), root_path %>
						<%= link_to image_tag('dustbin.png', size: "14", class: "ml-2"), error_message_attempt_delete_path(message.id), method: :delete, remote: true %>
					</div>
				</div>
				<!-- error card -->
				<div class="error_node_message_text_area error_node_message_text_area_text p-2">
					<div style="font-size: 12px; color: rgb(200,200,200);">
						<%if message.error_node == "error_message"%>
							Send Error Message
						<%elsif message.error_node == "transfer_to_agent"%>
							Transfer to agent group : <b>Group - 1</b>
						<%elsif message.error_node == "link_to_node"%>
							Link to another node : 
							<b>
								<%if message.error_node_link_to_node%>
									<%= message.error_node_link_to_node%>
								<%else%>
									<span style="color: red;">Please select a node</span>
								<%end%>
							</b>
						<%elsif message.error_node == "exit_message"%>
							Exit conversation
						<%end%>
					</div>

					<div>
						<%if message.error_node == "error_message"%>
							<%= message.error_node_message%>
						<%elsif message.error_node == "transfer_to_agent"%>
							<%= message.error_node_transfer_to_agent_message%>
						<%elsif message.error_node == "link_to_node"%>
							<%= message.error_node_link_to_message%>
						<%elsif message.error_node == "exit_message"%>
							<%= message.error_node_exit_message%>
						<%end%>
					</div>
				<!-- error card end -->
				</div>
				<div class="error_message_node_form_showing_off">					
					<%= render 'home/edit/nodes/usermessages_error_node_expanded_form', message: message%>
				</div>
			<!-- end of looping cards and forms -->
			<%end%>

			<!-- no messages, when loop is nil -->
			<%if number == 0%>
				<div class="text-center">
					No error messages added					
				</div>
			<%end%>
			<!-- form for adding new messages -->
			<div class="error_message_node_form_showing_off" >
				<% number = number + 1%>
				<div class="mb-2" >
					<%if (number)%10 == 1 && number != 11%>
						<%= number%>st			 
					<%elsif (number)%10 == 2  && number != 12%>
						<%= number%>nd			 
					<%elsif (number)%10 == 3  && number != 13%>
						<%= number%>rd
					<%else%>	
						<%= number%>th		
					<%end%>
					error attempt 
				</div>					
				<%= render 'home/edit/nodes/usermessages_error_node_expanded_form', message: "default"%>
			</div>

			<!-- save and add another error attempt to collpase exapnded and add new error message -->
			<div class="text-center mt-2">
				<%= link_to " + Add another error attempt", root_path, class: "add_another_error_attempt"%>
				<%= link_to "Save", root_path, class: "btn btn-sm btn-outline-secondary  mt-2", style: "color: grey; width: 240px;"%>
			</div>
		<!-- end of the white part in expanded -->
		</div>

	<%end%>
</div>
